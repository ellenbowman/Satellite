<html>
<head>
	<title>index of articles</title>
	<style>
		select.service-select-tall{
			min-height: 210px;
		}
	</style>
</head>
<body>
	<h2>Article matches</h2>
	
	<div>
		<table>
			<tr>
				<td style='vertical-align:top'>
					how many articles are represented? {{num_articles}}
					<br/>
					the most recent article in this result set was published on {{pub_date_newest}}
					<br/>
					the oldest article in this results set was published on {{pub_date_oldest}}
					<br/>
					how many authors are represented? {{num_authors}}

					{% if service_filter_description or ticker_filter_description %}
					<div style='background-color:lightgray;width:500px;margin:12px 2px;'>
						These results are filtered.
						<br/>

						{% if service_filter_description %}
						<br/>
						service filter: <strong>{{service_filter_description}}</strong>
						<br/>
						{% endif %}
						
						{% if ticker_filter_description %}
						<br/>
						ticker filter: <strong>{{ticker_filter_description}}</strong>
						<br/>
						{% endif %}

						<br/>
						<a href='/sol/articles_vomit/'><button type='button'>Remove filter</button></a>
						<br/>

						*known bug: if the results span more than one page... sorry, but we lose the filter when advancing to subsequent pages. 
					</div>
					{% endif %}
				</td>
				<td>
					<div style='padding-left:15px;'>
						Filter options
						<form action="" method="post">
							{% csrf_token %}
							<hr/>
							Tickers:<br/>
							{{form.tickers}}
							<br/>
							<br/>
							Services:<br/>{{form.services}}
							<hr/>
							 <input type="submit" value="Apply filter">
						</form>
					</div>
				</td>
			</tr>
		</table>
	</div>

	<div>
		<table>
			<thead>
				<tr style='text-align:left'>
					<th width='40%'>Headline</th>
					<th width='25%'>Author</th>
					<th width='5%'>Ticker</th>
					<th width='10%'>Date</th>
					<th width='10%'>Service</th>
					<th width='5%'># articles by this author (in SOL)</th>
					<th width='5%'># articles by this author (in SOL),last 10 days</th>
				</tr>
			</thead>
			<tbody>
			{% for article_defn in article_defns %}
			<tr>
				<td><a href='http://{{article_defn.article.url}}'>{{article_defn.article.title}}</a></td>
				<td>
					{{article_defn.article.author}}
					<br/>
					<small>{{article_defn.author_service_associations}}</small>
				</td>
				<td>{{article_defn.article.ticker}}</td>
				<td>{{article_defn.article.date_pub}}</td>
				<td>{{article_defn.article.service.pretty_name}}</td>
				<td>{{article_defn.num_articles_by_this_author}}</td>
				<td>{{article_defn.num_author_articles_last_ten_dates}}</td>
			</tr>
			{% endfor %}
			</tbody>
	</div>


	<div class="pagination">
	    <span class="step-links">
	        {% if articles.has_previous %}
	            <a href="?page={{ articles.previous_page_number }}">previous</a>
	        {% endif %}

	        <span class="current">
	            Page {{ articles.number }} of {{ articles.paginator.num_pages }}.
	        </span>

	        {% if articles.has_next %}
	            <a href="?page={{ articles.next_page_number }}">next</a>
	        {% endif %}
	    </span>
	</div>

</div>
</body>
</html>