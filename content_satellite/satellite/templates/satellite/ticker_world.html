{% extends 'satellite/_base_layout.html' %}

{% block title_value %}
SOL: Ticker World
{% endblock %}

{% block container_contents %}

	<h2><a href="/sol/ticker_world/"><img align="left" style="padding-right:20px;" width=100px src="http://g.foolcdn.com/editorial/images/150992/tickerworld3000_large.jpg"></a>
	Welcome to Ticker World. 
		{% if service_filter_description %}
		These results are for {{service_filter_description}}.
		{% else %}
		You're seeing everything.
		{% endif %}
	</h2>
<hr/>
    <table>
    	<tr>
    		<td align="center"><h4>Filter</h4></td>
    		<td align="center"><h4>At a Glance</h4></td>
    	</tr>
		<tr>
    	<td style="padding:15px;">
			<form action="" method="post">
				{% csrf_token %}
				<strong>Filter by ticker(s):</strong>
				{{form.tickers}} <input type="submit" value="Apply filter"><br/>
				<br/>
				<strong>Filter by service(s):</strong>
				{{form.services}}  <input type="submit" value="Apply filter"><br/>
				<em>Ctrl/Cmd+click to select more than one</em>.
			</form>
			<br/>
			<p><strong>Active filters:  </strong>
			{% if service_filter_description %}
			<em>Service(s):  </em>{{service_filter_description}}
			{% endif %}&nbsp;&nbsp;&nbsp;&nbsp;
			{% if ticker_filter_description %}
			<em>Ticker(s):  </em>{{ticker_filter_description}}
			{% endif %}<br/>
			<p><strong>Number of tickers:</strong> {{num_tickers}}
			</p>
			<p><a href="{% url 'ticker_world' %}"><button type='button'>Remove filters</button></a></p>
		</td>
		<td style="padding:15px;" align="center">
			<strong>Currently Up</strong><br/>
				{% for t in top_gainers %}
				<a href="#{{t.ticker_symbol}}">{{t.ticker_symbol}}</a>: {{t.daily_percent_change}}%<br/>
				{% endfor %}
		</td>
		<td style="padding:15px;" align="center">
			<strong>Currently Down</strong><br/>
				{% for t in top_losers %}
				<a href="#{{t.ticker_symbol}}">{{t.ticker_symbol}}</a>: {{t.daily_percent_change}}%<br/>
				{% endfor %}</td>
		<td style="padding:15px;" align="center">
			<strong>Upcoming Earnings</strong><br/>
				{% for t in tickers_sorted_by_earnings_date %}
				<a href="#{{t.ticker_symbol}}">{{t.ticker_symbol}}</a>: {{t.earnings_announcement}}<br/>
				{% endfor %}
		</tr>
	</table>

<hr/>
{% if next_week %}
<h3>Earnings in the Next Seven Days</h3>
<p>
	{% for t in tickers_for_next_week %}
		<a href="#{{t.ticker_symbol}}">{{t.ticker_symbol}}</a>: {{t.earnings_announcement}}<br/>
	{% endfor %}
</p>
{% endif %}
<hr/>
<h3><a target="blank" href="https://www.youtube.com/watch?v=gy0Gd2-GdOI">Ticker Biographies</a></h3>
<p>{% if sort_by_daily_percent_change %}
        	<p> These are sorted by <strong>current percent change</strong>. <button type="button"><a href="/sol/ticker_world/earnings_date_sort">
        	Sort by upcoming earnings date</button></a></p>
    		{% else %}
        	<p>These are sorted by <strong>upcoming earnings date</strong>.&nbsp;&nbsp;&nbsp;<button type="button"><a href="/sol/ticker_world/">Sort by current percent change</button></a></p>
    		{% endif %}
</p>
{% for t in tickers %}
<p id="{{t.ticker_symbol}}">
	<img width='40px' src='http://g.foolcdn.com/art/companylogos/mark/{{t}}.png' alt='{{t.ticker_symbol}}'/>&nbsp;&nbsp;<span style='background-color:yellow'>{{t.daily_percent_change}}%</span> | <strong>{{t.company_name}}</strong> | {{t.exchange_symbol}}: <a href='http://www.fool.com/quote/1255/{{t.ticker_symbol}}' target='_blank'><strong>{{t.ticker_symbol}}</strong></a>
<br/>
<strong>Scorecards with this ticker</strong>: {{t.scorecards_for_ticker}} | <strong>Tier</strong>: Tier goes here | <strong>Next earnings date</strong>: {{t.earnings_announcement}}<br/>
<a href="{% url 'everything_about_articles'%}?tickers={{t.ticker_symbol}}" target='_blank'>Premium coverage</a><br />
</p>
<p>
	<form action="/sol/ticker_world/" method="post">
    {% csrf_token %}
    <strong>Notes:</strong><br/>
    <textarea cols=100 rows=5 id = "edit_notes" name="ticker_notes_{{t.ticker_symbol}}"/>{{ t.notes|default_if_none:''}}
	</textarea></br>
    <input type="submit" value="Edit notes"></span>
</form>
</p>
{% endfor %}
<hr/>
{% endblock container_contents %}